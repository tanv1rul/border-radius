<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResizableTable.js - jQuery Plugin for Resizable and Collapsible Tables</title>
    <link rel="stylesheet" href="style.css">
    <!-- <link rel="stylesheet" href="src/style.css"> -->
    <style>
      /* Placeholder styling */
      .rt-col-placeholder {
        /* width is set by options.placeholderCellWidth via JS if usePlaceholdersForCollapse is true */
        min-width: 10px; /* Fallback if width option is very small */
        box-sizing: border-box;
        padding: 2px 4px;
        text-align: center;
        background-color: #f0f0f0;
        border: 1px dashed #ccc;
        font-size: 0.8em; /* Smaller font for placeholder content like '+' */
        color: #777;
      }
      th.rt-col-placeholder {
        font-weight: normal; /* Placeholder header text shouldn't be bold typically */
      }

      /* Style for the main collapse toggle elements (created by JS) */
      .rt-collapse-toggle {
          /* Base styles are applied in JS from options (size, color) */
          /* Add any additional CSS-only styles or overrides here if needed */
          font-family: monospace; /* Example: for better rendering of +/- symbols */
          line-height: 1; /* Ensure tight fit if using text symbols */
      }

      /* Visual feedback for resize handles (created by JS) */
      .rt-resize-handle {
        /* Base background-color is set via JS from options.resizeHandleColor */
        transition: background-color 0.15s ease-in-out;
      }
      .rt-resize-handle:hover {
        background-color: rgba(100, 100, 100, 0.5) !important;
      }
      .rt-resize-handle.rt-active-handle {
        background-color: rgba(0, 0, 255, 0.4) !important;
      }
    </style>
</head>
<body>
    <header>
        <h1>ResizableTable.js</h1>
        <p>A jQuery plugin for creating tables that are both resizable and collapsible, offering enhanced user interaction and data presentation.</p>
    </header>

    <h2>Demonstration</h2>
    <div class="table-container">
      <table id="myTable" border="1">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Country</th>
            <th>Address</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>John Doe</td>
            <td>john.doe@example.com</td>
            <td>USA</td>
            <td>123 Main St, Anytown</td>
            <td>Met at conference.</td>
          </tr>
          <tr>
            <td>Jane Smith</td>
            <td>jane.smith@example.com</td>
            <td>Canada</td>
            <td>456 Oak Rd, Otherville</td>
            <td>Potential client.</td>
          </tr>
          <tr>
            <td>Peter Jones</td>
            <td>peter.jones@example.com</td>
            <td>UK</td>
            <td>789 Pine Ln, Sometown</td>
            <td>Follow up required.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <h2>Usage</h2>
    <p>Detailed usage instructions will be added here. For now, please refer to the README.md.</p>

    <h2>Source Code</h2>
    <p>The source code for ResizableTable.js is available on GitHub. You can find the repository <a href="#">here</a>.</p>

    <script src="src/ResizableTable.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        try {
          const tableInstance = new ResizableTable('#myTable', {
            // Behavior options
            enableResizing: true,
            enableCollapsing: true,
            usePlaceholdersForCollapse: true, // Try true or false to see different collapse modes

            // Resizing options
            minColumnWidth: 40, // Minimum width a column can be resized to
            maxColumnWidth: 500, // Maximum width a column can be resized to
            resizeHandleWidth: 10, // Visual width of the draggable resize handle
            // resizeHandleColor: 'rgba(0,123,255,0.25)', // Example: Custom base color for handles

            // Collapsing options
            // collapseToggleSize: 12, // Example: Size of the clickable toggle button
            // collapseToggleColor: 'green', // Example: Custom color for the toggle button
            collapseToggleContentOpen: '&#x25BC;', // Downward triangle (▼) when column is expanded
            collapseToggleContentClosed: '&#x25B6;', // Rightward triangle (▶) when column is collapsed/placeholder
            placeholderCellWidth: 25, // Width of placeholder cells when a column is collapsed

            // Event callbacks (examples)
            onInit: function(data) {
              console.log('Event: onInit - Table initialized!', data.instance);
            },
            onColumnResizeStart: function(data) {
              console.log(`Event: onColumnResizeStart - Column ${data.columnIndex} resize started.`);
            },
            onColumnResized: function(data) {
              console.log(`Event: onColumnResized - Column ${data.columnIndex} resized to ${data.newWidth}px.`);
            },
            onColumnCollapse: function(data) {
              console.log(`Event: onColumnCollapse - Column ${data.columnIndex} collapsed.`);
            },
            onColumnExpand: function(data) {
              console.log(`Event: onColumnExpand - Column ${data.columnIndex} expanded.`);
            },
            onBeforeDestroy: function(data) {
              console.log('Event: onBeforeDestroy - Table about to be destroyed.', data.instance);
            },
            onColumnWidthSet: function(data) {
              console.log(`Event: onColumnWidthSet - Column ${data.columnIndex} width set to ${data.newWidth}px by ${data.source}.`);
            }
          });

          console.log('ResizableTable instance with comprehensive options:', tableInstance);

          // Example of using public methods after initialization:
          // setTimeout(() => {
          //   if (tableInstance.isInitialized) {
          //     console.log('Programmatically toggling column 0 after 2 seconds...');
          //     tableInstance.toggleColumn(0);
          //   }
          // }, 2000);

          // setTimeout(() => {
          //   if (tableInstance.isInitialized) {
          //     console.log('Programmatically setting column 1 width after 4 seconds...');
          //     tableInstance.setColumnWidth(1, 150);
          //   }
          // }, 4000);

        } catch (e) {
          console.error("Error initializing ResizableTable:", e.message, e);
        }
      });
    </script>
</body>
</html>
